{% extends 'samarpan/base.html' %}
{% load static %}
{% block content %}
<div id="about" class="about">
    <div class="col-md-12 col-sm-12 col-xs-12 bloodbox" style="padding:5px;">
        <div class="col-md-12 col-sm-12 col-xs-12" style="border:1px solid #F90; padding:15px;">
            <div class="col-md-12 col-sm-12 col-xs-12">
                <div class="center_text">
                    <center><h2>Add Student Details</h2></center>   
                </div>
            </div>
        </div>
    </div>
    <div class="container"><br>
        <form method="POST" action="{% url 'add_student' %}">
            {% csrf_token %}
            <div class="form-row">
                <div class="form-group col-md-4">
                    {{ form.first_name.label_tag }} {{ form.first_name }}
                </div>
                <div class="form-group col-md-4">
                    {{ form.middle_name.label_tag }} {{ form.middle_name }}
                </div>
                <div class="form-group col-md-4">
                    {{ form.surname.label_tag }} {{ form.surname }}
                </div>
            </div>
            <div class="form-group">
                {{ form.mobile.label_tag }} {{ form.mobile }}
            </div>
            <div class="form-group">
                {{ form.email.label_tag }} {{ form.email }}
            </div>
            <!-- Institution Dropdown -->
            <div class="form-group">
                {{ form.institution.label_tag }} {{ form.institution }}
            </div>
            <div class="form-group">
                {{ form.pincode.label_tag }} {{ form.pincode }}
            </div>
            <div class="form-group">
                {{ form.dob.label_tag }} {{ form.dob }}
            </div>
            
            <!-- Conditional Fields for Institution Type -->
            <div class="form-group" id="school-fields" style="display: none;">
                {{ form.grade.label_tag }} {{ form.grade }}
            </div>

            <div class="form-row" id="college-fields" style="display: none;">
                <div class="form-group col-md-6">
                    {{ form.year.label_tag }} {{ form.year }}
                </div>
                <div class="form-group col-md-6">
                    {{ form.stream.label_tag }} {{ form.stream }}
                </div>
            </div>

            <div class="form-group">
                {{ form.blood_group.label_tag }} {{ form.blood_group }}
            </div>
            <div class="form-group">
                {{ form.gender.label_tag }} {{ form.gender }}
            </div>
            <button type="submit" class="btn btn-primary">Submit</button>
        </form><br>
    </div>
</div>

<!-- JavaScript to handle conditional fields based on institution type -->
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const institutionTypeRadios = document.querySelectorAll('input[name="institution_type"]');
        const schoolFields = document.getElementById('school-fields');
        const collegeFields = document.getElementById('college-fields');

        institutionTypeRadios.forEach(radio => {
            radio.addEventListener('change', function() {
                if (this.value === 'School') {
                    schoolFields.style.display = 'block';
                    collegeFields.style.display = 'none';
                } else if (this.value === 'College') {
                    collegeFields.style.display = 'block';
                    schoolFields.style.display = 'none';
                }
            });
        });
    });
</script>
{% endblock %}
